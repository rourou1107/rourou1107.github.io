<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>最小知识原则 | 肉肉的博客</title>
    <meta name="description" content="肉肉的前端记录">
    <link rel="icon" href="  ./logo.jpg">
    
    <link rel="preload" href="/dist/assets/css/0.styles.f7c7379b.css" as="style"><link rel="preload" href="/dist/assets/js/app.b9ad9f24.js" as="script"><link rel="preload" href="/dist/assets/js/2.4917c22f.js" as="script"><link rel="preload" href="/dist/assets/js/119.65f3e6aa.js" as="script"><link rel="prefetch" href="/dist/assets/js/10.f87136f6.js"><link rel="prefetch" href="/dist/assets/js/100.27fa6d08.js"><link rel="prefetch" href="/dist/assets/js/101.496235bb.js"><link rel="prefetch" href="/dist/assets/js/102.d052dec6.js"><link rel="prefetch" href="/dist/assets/js/103.35e2dd7e.js"><link rel="prefetch" href="/dist/assets/js/104.0a9f1f6c.js"><link rel="prefetch" href="/dist/assets/js/105.28f747f4.js"><link rel="prefetch" href="/dist/assets/js/106.40b1b6b1.js"><link rel="prefetch" href="/dist/assets/js/107.d101e276.js"><link rel="prefetch" href="/dist/assets/js/108.a8ed11e4.js"><link rel="prefetch" href="/dist/assets/js/109.7de02b90.js"><link rel="prefetch" href="/dist/assets/js/11.0eb24166.js"><link rel="prefetch" href="/dist/assets/js/110.b0ef8bef.js"><link rel="prefetch" href="/dist/assets/js/111.21d7965d.js"><link rel="prefetch" href="/dist/assets/js/112.2746265d.js"><link rel="prefetch" href="/dist/assets/js/113.add7920b.js"><link rel="prefetch" href="/dist/assets/js/114.a60c67ec.js"><link rel="prefetch" href="/dist/assets/js/115.095e044d.js"><link rel="prefetch" href="/dist/assets/js/116.7ff47de1.js"><link rel="prefetch" href="/dist/assets/js/117.81840f03.js"><link rel="prefetch" href="/dist/assets/js/118.a92deb47.js"><link rel="prefetch" href="/dist/assets/js/12.196bebc3.js"><link rel="prefetch" href="/dist/assets/js/120.919a874d.js"><link rel="prefetch" href="/dist/assets/js/13.47b41412.js"><link rel="prefetch" href="/dist/assets/js/14.fb221777.js"><link rel="prefetch" href="/dist/assets/js/15.63e7053a.js"><link rel="prefetch" href="/dist/assets/js/16.6ee52bf3.js"><link rel="prefetch" href="/dist/assets/js/17.1398b07d.js"><link rel="prefetch" href="/dist/assets/js/18.f399fedb.js"><link rel="prefetch" href="/dist/assets/js/19.7f585c1d.js"><link rel="prefetch" href="/dist/assets/js/20.ba495fb9.js"><link rel="prefetch" href="/dist/assets/js/21.78353c89.js"><link rel="prefetch" href="/dist/assets/js/22.863095ed.js"><link rel="prefetch" href="/dist/assets/js/23.3b398943.js"><link rel="prefetch" href="/dist/assets/js/24.2a25eed0.js"><link rel="prefetch" href="/dist/assets/js/25.8f9afc58.js"><link rel="prefetch" href="/dist/assets/js/26.25bcc3a6.js"><link rel="prefetch" href="/dist/assets/js/27.56747af2.js"><link rel="prefetch" href="/dist/assets/js/28.fd95f41e.js"><link rel="prefetch" href="/dist/assets/js/29.d0d6c0ce.js"><link rel="prefetch" href="/dist/assets/js/3.2bfbe475.js"><link rel="prefetch" href="/dist/assets/js/30.54244b40.js"><link rel="prefetch" href="/dist/assets/js/31.e8623bdc.js"><link rel="prefetch" href="/dist/assets/js/32.db38fc0c.js"><link rel="prefetch" href="/dist/assets/js/33.bf2355c3.js"><link rel="prefetch" href="/dist/assets/js/34.036dfeaf.js"><link rel="prefetch" href="/dist/assets/js/35.8d51c6bb.js"><link rel="prefetch" href="/dist/assets/js/36.ca23a5d9.js"><link rel="prefetch" href="/dist/assets/js/37.66bb7fde.js"><link rel="prefetch" href="/dist/assets/js/38.cc0dbff6.js"><link rel="prefetch" href="/dist/assets/js/39.74529f1a.js"><link rel="prefetch" href="/dist/assets/js/4.4e90b1da.js"><link rel="prefetch" href="/dist/assets/js/40.e496a66c.js"><link rel="prefetch" href="/dist/assets/js/41.bde9e7ee.js"><link rel="prefetch" href="/dist/assets/js/42.ee736b78.js"><link rel="prefetch" href="/dist/assets/js/43.8a1d7452.js"><link rel="prefetch" href="/dist/assets/js/44.c1d0bede.js"><link rel="prefetch" href="/dist/assets/js/45.6e9a558e.js"><link rel="prefetch" href="/dist/assets/js/46.7c9730b3.js"><link rel="prefetch" href="/dist/assets/js/47.48fac0f1.js"><link rel="prefetch" href="/dist/assets/js/48.71bfb8c4.js"><link rel="prefetch" href="/dist/assets/js/49.dfc16d39.js"><link rel="prefetch" href="/dist/assets/js/5.c2915a32.js"><link rel="prefetch" href="/dist/assets/js/50.97aa239f.js"><link rel="prefetch" href="/dist/assets/js/51.848ef670.js"><link rel="prefetch" href="/dist/assets/js/52.e2747e57.js"><link rel="prefetch" href="/dist/assets/js/53.fd90109b.js"><link rel="prefetch" href="/dist/assets/js/54.4ea96e33.js"><link rel="prefetch" href="/dist/assets/js/55.edb3afef.js"><link rel="prefetch" href="/dist/assets/js/56.11309e9b.js"><link rel="prefetch" href="/dist/assets/js/57.2170ff61.js"><link rel="prefetch" href="/dist/assets/js/58.812cdcb5.js"><link rel="prefetch" href="/dist/assets/js/59.b0bb9dfa.js"><link rel="prefetch" href="/dist/assets/js/6.5bf7476f.js"><link rel="prefetch" href="/dist/assets/js/60.954844a1.js"><link rel="prefetch" href="/dist/assets/js/61.b80d855e.js"><link rel="prefetch" href="/dist/assets/js/62.80259b52.js"><link rel="prefetch" href="/dist/assets/js/63.536ee073.js"><link rel="prefetch" href="/dist/assets/js/64.d92d7846.js"><link rel="prefetch" href="/dist/assets/js/65.7ca7f6e7.js"><link rel="prefetch" href="/dist/assets/js/66.677f0674.js"><link rel="prefetch" href="/dist/assets/js/67.93a30cf4.js"><link rel="prefetch" href="/dist/assets/js/68.822d1750.js"><link rel="prefetch" href="/dist/assets/js/69.9250145f.js"><link rel="prefetch" href="/dist/assets/js/7.53826fff.js"><link rel="prefetch" href="/dist/assets/js/70.b5ae076c.js"><link rel="prefetch" href="/dist/assets/js/71.36245c02.js"><link rel="prefetch" href="/dist/assets/js/72.2e8608d4.js"><link rel="prefetch" href="/dist/assets/js/73.036bf792.js"><link rel="prefetch" href="/dist/assets/js/74.556b95d0.js"><link rel="prefetch" href="/dist/assets/js/75.fcc10040.js"><link rel="prefetch" href="/dist/assets/js/76.60eb8d71.js"><link rel="prefetch" href="/dist/assets/js/77.c3172f36.js"><link rel="prefetch" href="/dist/assets/js/78.aeb7834e.js"><link rel="prefetch" href="/dist/assets/js/79.9a8b76bd.js"><link rel="prefetch" href="/dist/assets/js/8.da07394f.js"><link rel="prefetch" href="/dist/assets/js/80.6e72e0a6.js"><link rel="prefetch" href="/dist/assets/js/81.de3eb76f.js"><link rel="prefetch" href="/dist/assets/js/82.df0be880.js"><link rel="prefetch" href="/dist/assets/js/83.4afddcee.js"><link rel="prefetch" href="/dist/assets/js/84.ffa16bff.js"><link rel="prefetch" href="/dist/assets/js/85.3915abc2.js"><link rel="prefetch" href="/dist/assets/js/86.ca3af724.js"><link rel="prefetch" href="/dist/assets/js/87.8fe838e6.js"><link rel="prefetch" href="/dist/assets/js/88.cbc948e5.js"><link rel="prefetch" href="/dist/assets/js/89.f7a050c3.js"><link rel="prefetch" href="/dist/assets/js/9.c34aebf1.js"><link rel="prefetch" href="/dist/assets/js/90.5167d315.js"><link rel="prefetch" href="/dist/assets/js/91.be821480.js"><link rel="prefetch" href="/dist/assets/js/92.a587996e.js"><link rel="prefetch" href="/dist/assets/js/93.95bfc22f.js"><link rel="prefetch" href="/dist/assets/js/94.4c2ca8ad.js"><link rel="prefetch" href="/dist/assets/js/95.7594d394.js"><link rel="prefetch" href="/dist/assets/js/96.24b5ff6a.js"><link rel="prefetch" href="/dist/assets/js/97.9aca1136.js"><link rel="prefetch" href="/dist/assets/js/98.9c76f16c.js"><link rel="prefetch" href="/dist/assets/js/99.091bd6d8.js">
    <link rel="stylesheet" href="/dist/assets/css/0.styles.f7c7379b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/dist/" class="home-link router-link-active"><img src="./logo.jpg" alt="肉肉的博客" class="logo"> <span class="site-name can-hide">肉肉的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/dist/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/pages/javascript/JavaScript的历史.html" class="nav-link">文章</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/rourou1107" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/dist/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/pages/javascript/JavaScript的历史.html" class="nav-link">文章</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/rourou1107" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES6</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>设计模式</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dist/pages/设计模式/浅谈MVC.html" class="active sidebar-link">浅谈MVC</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ElementUI</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React之小白</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTTP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>流水账</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>自制 UI 框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue3造轮子</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>可视化大屏</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>nodejs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>单元测试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>项目经验</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="最小知识原则"><a href="#最小知识原则" class="header-anchor">#</a> 最小知识原则</h3> <ul><li><p>开始的时候引入一个模块需要引入 html、css、js</p></li> <li><p>变为, 引入一个模块需要引入 html、js (即css在这个js中)</p></li> <li><p>变为, 引入一个模块需要引入 js (即html、css都在这个js中)</p></li> <li><p>代价---打开页面时一开始是空白的。解决办法 : 可以使用菊花、骨架、图片、SSR技术</p></li></ul> <h3 id="下方模块做的事情"><a href="#下方模块做的事情" class="header-anchor">#</a> 下方模块做的事情:</h3> <p>写了一个简单地可以做加减乘除的计算器</p> <h3 id="mvc-演化前的代码"><a href="#mvc-演化前的代码" class="header-anchor">#</a> MVC 演化前的代码</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 初始化html</span>
<span class="token keyword">const</span> html <span class="token operator">=</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
&lt;section id=&quot;app1&quot;&gt;
    &lt;p id=&quot;number&quot;&gt;100&lt;/p&gt;
    &lt;button class=&quot;add&quot;&gt;+1&lt;/button&gt;
    &lt;button class=&quot;minus&quot;&gt;-1&lt;/button&gt;
    &lt;button class=&quot;multiply&quot;&gt;*2&lt;/button&gt;
    &lt;button class=&quot;divide&quot;&gt;/2&lt;/button&gt;
&lt;/section&gt;
</span><span class="token template-punctuation string">`</span></span>
<span class="token comment">// 在page的开头插入html</span>
<span class="token keyword">const</span>  $element <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prependTo</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body &gt; .page'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 

<span class="token comment">// 寻找重要的元素</span>
<span class="token keyword">const</span> $number <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#number'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> $add <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.add'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> $minus <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.minus'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> $mult <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.multiply'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> $divide <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.divide'</span><span class="token punctuation">)</span>

<span class="token comment">// 初始化重要的数据</span>
<span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">Number</span><span class="token punctuation">(</span>$number<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 将数据渲染到页面</span>
$number<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>

<span class="token comment">// 绑定鼠标事件</span>
$add<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    number <span class="token operator">+=</span> <span class="token number">1</span>
    $number<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">,</span> number<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
$minus<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    number <span class="token operator">-=</span> <span class="token number">1</span>
    $number<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">,</span> number<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
$mult<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    number <span class="token operator">*=</span> <span class="token number">2</span>
    $number<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">,</span> number<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
$divide<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    number <span class="token operator">/=</span> <span class="token number">2</span>
    $number<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">,</span> number<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h3 id="mvc-演化后的代码"><a href="#mvc-演化后的代码" class="header-anchor">#</a> MVC 演化后的代码</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">'./app1.css'</span>
<span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">'jquery'</span>
<span class="token keyword">const</span> eventBus <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span>
<span class="token comment">// 数据相关都放到m</span>
<span class="token keyword">const</span> m <span class="token operator">=</span> <span class="token punctuation">{</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    n<span class="token punctuation">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'n'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">100</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>data<span class="token punctuation">,</span> data<span class="token punctuation">)</span>
    eventBus<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'m:updated'</span><span class="token punctuation">)</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'n'</span><span class="token punctuation">,</span> m<span class="token punctuation">.</span>data<span class="token punctuation">.</span>n<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 视图相关都放到v</span>
<span class="token keyword">const</span> v <span class="token operator">=</span> <span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  html<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  &lt;div&gt;
    &lt;div class=&quot;output&quot;&gt;
      &lt;span id=&quot;number&quot;&gt;{{n}}&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;actions&quot;&gt;
      &lt;button id=&quot;add1&quot;&gt;+1&lt;/button&gt;
      &lt;button id=&quot;minus1&quot;&gt;-1&lt;/button&gt;
      &lt;button id=&quot;mul2&quot;&gt;*2&lt;/button&gt;
      &lt;button id=&quot;divide2&quot;&gt;÷2&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">container</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    v<span class="token punctuation">.</span>el <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">.</span>el<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> v<span class="token punctuation">.</span>el<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">$</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>html<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'{{n}}'</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>el<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 其他都c</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">container</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    v<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span>
    v<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>data<span class="token punctuation">.</span>n<span class="token punctuation">)</span> <span class="token comment">// view = render(data)</span>
    c<span class="token punctuation">.</span><span class="token function">autoBindEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    eventBus<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'m:updated'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      v<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>data<span class="token punctuation">.</span>n<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  events<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'click #add1'</span><span class="token punctuation">:</span> <span class="token string">'add'</span><span class="token punctuation">,</span>
    <span class="token string">'click #minus1'</span><span class="token punctuation">:</span> <span class="token string">'minus'</span><span class="token punctuation">,</span>
    <span class="token string">'click #mul2'</span><span class="token punctuation">:</span> <span class="token string">'mul'</span><span class="token punctuation">,</span>
    <span class="token string">'click #divide2'</span><span class="token punctuation">:</span> <span class="token string">'div'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    m<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>n<span class="token punctuation">:</span> m<span class="token punctuation">.</span>data<span class="token punctuation">.</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">minus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    m<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>n<span class="token punctuation">:</span> m<span class="token punctuation">.</span>data<span class="token punctuation">.</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mul</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    m<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>n<span class="token punctuation">:</span> m<span class="token punctuation">.</span>data<span class="token punctuation">.</span>n <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">div</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    m<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>n<span class="token punctuation">:</span> m<span class="token punctuation">.</span>data<span class="token punctuation">.</span>n <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">autoBindEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> c<span class="token punctuation">.</span>events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> value <span class="token operator">=</span> c<span class="token punctuation">[</span>c<span class="token punctuation">.</span>events<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">]</span>
      <span class="token keyword">const</span> spaceIndex <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> part1 <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> spaceIndex<span class="token punctuation">)</span>
      <span class="token keyword">const</span> part2 <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>spaceIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
      v<span class="token punctuation">.</span>el<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>part1<span class="token punctuation">,</span> part2<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> c
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br></div></div><h3 id="一、mvc-三个对象的作用"><a href="#一、mvc-三个对象的作用" class="header-anchor">#</a> 一、MVC 三个对象的作用</h3> <ul><li>M(Model 数据模型) 对象 : 用于封装与应用程序的业务逻辑相关的<strong>数据</strong>以及对<strong>数据的处理方法</strong>, 会有一个或多个视图监听此模型。一旦模型的数据发生变化, 模型将通知有关的视图。</li></ul> <p><code>我的理解: 保存以及操作视图中的数据</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> m <span class="token operator">=</span> <span class="token punctuation">{</span>
    data<span class="token punctuation">:</span> 渲染页面所需要的数据
    <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 对数据进行增</span>
    <span class="token keyword">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 对数据进行删</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 对数据进行改</span>
    <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 对数据进行查</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>V(View 视图)对象 : 视图view是它在屏幕上的表示, 描绘的是model的当前状态。当模型的数据发生变化, 视图相应地得到刷新自己的机会。</li></ul> <p><code>我的理解: 就是存和视图相关, 用户看的到的</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> v <span class="token operator">=</span> <span class="token punctuation">{</span>
    el<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// 存传入的父容器</span>
    html<span class="token punctuation">:</span> 该模块对应的html代码
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">container</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 初始化视图</span>
        v<span class="token punctuation">.</span>el <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 再一次渲染视图</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>C(Controller 控制器)对象 : 它处理用户的行为和数据model上的改变。</li></ul> <p><code>其他操作, 是V和M的传达者</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 比如: 获取页面元素、绑定事件等等</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        m<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>n<span class="token punctuation">:</span> m<span class="token punctuation">.</span>data<span class="token punctuation">.</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">minus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        m<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>n<span class="token punctuation">:</span> m<span class="token punctuation">.</span>data<span class="token punctuation">.</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">mul</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        m<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>n<span class="token punctuation">:</span> m<span class="token punctuation">.</span>data<span class="token punctuation">.</span>n <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">div</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        m<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>n<span class="token punctuation">:</span> m<span class="token punctuation">.</span>data<span class="token punctuation">.</span>n <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>MVC在JS中的应用图解
<img src="/rourou1107.gitee.io/dist/javascriptMVC.png" alt="mvc"></p> <h3 id="二、eventbus-事件总线"><a href="#二、eventbus-事件总线" class="header-anchor">#</a> 二、EventBus / 事件总线</h3> <p><code>let eventBus = $(window)</code></p> <ol><li><p>API :</p> <ul><li>监听函数 : <code>eventBus.on('xxx', fn)</code>--监听xxx事件的触发, 一旦有地方触发了xxx, 监听函数就立即执行fn这个回调函数</li> <li>触发函数 : <code>eventBus.trigger('xxx')</code>--触发xxx事件</li> <li>注销xxx事件: <code>eventBus.off('xxx')</code></li></ul></li> <li><p>作用: 用于对象之间的通信</p></li></ol> <h3 id="三、表驱动编程"><a href="#三、表驱动编程" class="header-anchor">#</a> 三、表驱动编程</h3> <ul><li>表驱动编程是指从表里面查找信息, 来代替使用if-else语句。当我们看到大批类似的代码, 但这些代码又不重复时可以使用。</li> <li>将这些代码中重要的数据做成哈希表, 在遍历这个表</li> <li>例子:</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 下面是四个按钮的点击事件--代码类似, 但又不重复</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#add'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    number <span class="token operator">+=</span> <span class="token number">1</span>
    $number<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">,</span> number<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#minus'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    number <span class="token operator">-=</span> <span class="token number">1</span>
    $number<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">,</span> number<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#mult'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    number <span class="token operator">*=</span> <span class="token number">2</span>
    $number<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">,</span> number<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#divide'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    number <span class="token operator">/=</span> <span class="token number">2</span>
    $number<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">,</span> number<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 用表驱动编程改进</span>

<span class="token comment">// 重要的信息存在表里</span>
events<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'click #add1'</span><span class="token punctuation">:</span> <span class="token string">'add'</span><span class="token punctuation">,</span>
    <span class="token string">'click #minus1'</span><span class="token punctuation">:</span> <span class="token string">'minus'</span><span class="token punctuation">,</span>
    <span class="token string">'click #mul2'</span><span class="token punctuation">:</span> <span class="token string">'mul'</span><span class="token punctuation">,</span>
    <span class="token string">'click #divide2'</span><span class="token punctuation">:</span> <span class="token string">'div'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 使用事件委托, 将点击事件注册在其父元素上</span>
<span class="token comment">// 遍历表</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> events<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>events<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> part <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> part1 <span class="token operator">=</span> part<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> part2 <span class="token operator">=</span> part<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#father'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>part1<span class="token punctuation">,</span> part2<span class="token punctuation">,</span> fn<span class="token punctuation">[</span>events<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="四、模块化"><a href="#四、模块化" class="header-anchor">#</a> 四、模块化</h3> <p>所谓模块化指的是, 页面中各个不同的功能给拆分成不同的模块, 每个模块之间互不影响。在每个模块内部, 自己管自己的html、css、js。最后只需要在主js中引入各个模块即可。如果需要使用某个模块的某个功能, 只需要将该模块导出, 需要引入的模块来导入即可。</p> <h3 id="五、抽象思维"><a href="#五、抽象思维" class="header-anchor">#</a> 五、抽象思维</h3> <ul><li>同样的代码写三遍, 就应该抽成一个函数</li> <li>同样的属性写三遍, 就应该做成公用属性(原型或者类)</li> <li>同样的原型写三遍, 就应该继承</li></ul> <p>类</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">EventBus</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_eventBus <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">on</span><span class="token punctuation">(</span><span class="token parameter">eventName<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_eventBus<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> fn<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token parameter">eventName<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_eventBus<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">off</span><span class="token punctuation">(</span><span class="token parameter">eventName<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_eventBus<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> fn<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>继承</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Model</span> <span class="token keyword">extends</span> <span class="token class-name">EventBus</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> keys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token string">'update'</span><span class="token punctuation">,</span> <span class="token string">'create'</span><span class="token punctuation">,</span> <span class="token string">'delete'</span><span class="token punctuation">,</span> <span class="token string">'get'</span><span class="token punctuation">]</span>
    keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> options<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/dist/pages/TypeScript/类型断言.html" class="prev">类型断言</a></span> <span class="next"><a href="/dist/pages/vue/vue完整版与非完整版的区别.html">vue完整版与非完整版的区别</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/dist/assets/js/app.b9ad9f24.js" defer></script><script src="/dist/assets/js/2.4917c22f.js" defer></script><script src="/dist/assets/js/119.65f3e6aa.js" defer></script>
  </body>
</html>
